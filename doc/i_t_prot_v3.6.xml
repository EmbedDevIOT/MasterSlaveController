<extboard_data>  <!--начало передачи--> 
    <adr id="1">  <!--начало информации для табло с адресом 1-->
        <cabin_mode>0</cabin_mode> <!--режим работы в качестве бегущей строки внутри салона, 0=выкл, 1=вкл, TBD -->
        <color_scheme>1</color_scheme>      <!-- режим цветовой схемы табло: 0 - обычный, статичный; 1 - "динамический", где цвета зон инвертируются. это затрагивает только зоны с mode 0\1\2.   -->
        <color_scheme_logic>0</color_scheme_logic>          <!-- 0 - по предопределённым значениям времени. 1 - по данным с ФД (локальный или RS данные) -->
        <treshold_down>30</treshold_down>     <!-- порог применения изменений при понижении яркости -->
        <treshold_up>40</treshold_up>     <!-- порог применения изменений при повышении яркости -->
        <loc_amb_light_decision_time>3000</loc_amb_light_decision_time>     <!-- в секундах, дальше мы делим на 10 в табло. Количество 10сек таймеров табло (опрос ФД) для принятия решения по инверсии цветов при динамич цв сх, min: 20, max: 10000 -->
        
        <TsizeDx> <!--размер табло в пикс, начало слева сверху--> 
            <X>320</X>
            <Y>64</Y>
        </TsizeDx>  
        <TsizeMx>  <!--число матриц в табло по X,Y -->
            <X>5</X>
            <Y>2</Y>
        </TsizeMx>
        <TsizeLx>  <!-- физ.размер одной матрицы в мм по X,Y - для вычисления шага в мм и подстройки скорости -->
            <X>256</X>
            <Y>128</Y>
        </TsizeLx>
        <rgb>1</rgb>  <!--цветное табло, 1=да, 0=нет  -->
        <rgb_balance> <!-- цветовой баланс по каналам р г б, эти значения сложить с теми, что указаны для зон (при этом итоговые не вылезают за 0~255)  -->
            <R>+100</R>
            <G>0</G>
            <B>-55</B>
        </rgb_balance>  
        <min_bright>55</min_bright> <!--минимальная яркость всего табло, с датчиком и без, в % от 0 до 100 -->
        <max_bright>100</max_bright>  <!--макс допустимая яркость табло с датчиком и без, в % от 0 до 100 -->
        <auto_bright>1</auto_bright>  <!--автоматическая регулировка яркости, 0=выкл,1=вкл, 0 игнорирует данные с датчика и светит макс допустимую яркость  -->
        <images>2</images>    <!-- число уникальных (!) картинок, распространяется на ОДИН адрес. От 0 до 8. Также включает в себя все кадры анимаций по отдельности.-->  
        <zones>8</zones>  <!--число зон в табло, максимум 40 -->
        
			<zone id="1">  <!--начало описания зоны #1  -->
            <startX>0</startX>  <!--начальная точка зоны, её верхний левый угол в общем массиве точек табло, Х  -->
            <startY>0</startY>  <!--начальная точка зоны, её верхний левый угол в общем массиве точек табло, У -->
            <size> <!--размер зоны по Х, У -->
                <X>128</X>
                <Y>32</Y>
            </size>  
            <color> <!--цвет текста в зоне (0~255,0~255,0~255), попадает под цветокоррекцию-->
                <R>255</R>
                <G>255</G>
                <B>255</B>
            </color>  
            <bgcolor> <!--цвет фона в зоне (0~255,0~255,0~255), попадает под цветокоррекцию-->
                <R>0</R>
                <G>0</G>
                <B>0</B>
            </bgcolor>  
            
			<align>left</align> <!-- выравнивание, center/left/right -->
            <direction>RTL</direction> <!-- направление бега, RTL или LTR -->     
                   
            <!--	========здесь начинаются отличия типов зон вывода========  -->
			<mode>0</mode> <!-- MODE 0 - режим статика -->
			<text>тестовый статичный текст, в салоне $temp1, на улице $temp2, под капотом $temp3</text>  <!--сам текст для вывода в зону, допустимо использование переменных (см. ниже)  -->
			 <!--==============либо================ -->
			<mode>1</mode> <!--MODE 1 - режим бег. текста--> 
			<speed>35</speed> <!-- скорость бега текста, от 1 до 999 см/сек  -->
            <nextstops>0</nextstops>        <!-- тег <nextstops>1</nextstops> сообщает о том, что в зоне требуется динамический вывод списка оставшихся остановок (методом этого mode). тег <text> ниже при этом не используется вообще.  -->
                                            <!-- сам список остановок берётся из посылки для БС через теги <str>. Пока данные не получены, ничего не выводится. -->
			<text>тестовый движущийся текст, сейчас $time, сегодня $date</text>  <!--сам текст для вывода в зону, допустимо использование переменных (см. ниже) -->
            <!--	==============либо================   -->
			<mode>2</mode> <!-- MODE 2 - режим цикличной смены кусков текста, выравнивание всегда по центру  -->
			<cycle_mode>5</cycle_mode><!-- тип смены: 0 - мгновенно, 1-смещение влево , 2-вправо , 3-вверх, 4-вниз, 5-фейд(плавное исчезание/появление)  -->
			<show_time>5</show_time> <!-- длительность показа одного куска, в секундах, 1~100 -->
			<swap_speed>10</swap_speed> <!-- скорость смещения текста для типов смены 1~4, в пикс/сек   -->
			<fade_time>100</fade_time>  <!-- быстрота фейда. это время от полной до нулевой яркости, и от нулевой до полной. измеряется в миллисекундах, от 10 до 1000мс  -->
			<speed>35</speed> <!-- если текст не помещается в зону, он будет бежать. скорость бега текста, от 1 до 999 см/сек  -->
            <nextstops>0</nextstops>        <!-- тег <nextstops>1</nextstops> сообщает о том, что в зоне требуется динамический вывод списка оставшихся остановок (методом этого mode). тег <text> ниже при этом не используется вообще. --> 
                                            <!-- сам список остановок берётся из посылки для БС через теги <str>. Пока данные не получены, ничего не выводится. -->      
            <text count="5">  <!--начало списка кусков текста -->
				<str id="1">пл. свободы</str>  <!--кусок #1 -->
				<str id="2">ул. республиканская</str>  <!--кусок #2 -->
				<str id="3">$time</str>  <!--здесь тоже можно использовать переменные -->
				<str id="4">$date</str>
				<str id="5">$temp2</str>
				<!--... -->
				<str id="200">конечный кусок текста</str>  <!--кусок #200, 200 - макс. число кусков.--> 
            </text>  <!--конец списка кусков текста -->

            
            <!--	==============либо================   -->            
            <mode>3</mode> <!-- MODE 3 - режим софитов (сплошная заливка цветом bgcolor + цветокоррекция, они уже указаны выше)  -->   
       
            
            <!--	==============либо================   -->            
            <mode>4</mode> <!-- MODE 4 - режим картинки -->
            
            <image>
                <name>st_64x64_8bit.bmp</name>          <!-- имя картинки, в режиме 5 доступна только одна картинка на одну зону -->
            </image>
            
            
            <!--	==============либо================   -->
            
            <mode>5</mode> <!-- MODE 5 - режим анимации картинок (смена одна на другую), максимум 5 картинок -->
            
            <frames count="3">      <!-- перечисление кадров с указанием числа кадров -->
                <frame id="1">
                    <name>st_64x64_4bit_1.bmp</name>        <!-- имя картинки -->
                    <time_on>500</time_on>      <!-- время отображения этой картинки в мс, далее идёт мгновенная смена на следующую -->                    
                </frame>
                
                <frame id="2">
                    <name>st_64x64_4bit_2.bmp</name>        <!-- имя картинки -->
                    <time_on>500</time_on>      <!-- время отображения этой картинки в мс, далее идёт мгновенная смена на следующую -->                       
                </frame>
                
                <frame id="3">
                    <name>st_64x64_4bit_3.bmp</name>        <!-- имя картинки -->
                    <time_on>500</time_on>      <!-- время отображения этой картинки в мс, далее идёт мгновенная смена на следующую -->                       
                </frame>                                                                
            </frames>
                                                      
            <!--	==========конец отличий типов зон вывода=========== -->
            
            <font>[16=0+14+2]1+thin+condensed+regular.font</font>  <!--имя шрифта для вывода текста в зону -->            
            </zone>  <!--конец описания зоны #1 -->
            
            
            <zone id="N">  <!--начало описания зоны #N -->
            <!--...  -->
            </zone>  <!--конец описания зоны #N-->
    </adr>  <!-- конец информации для табло с адресом 1 -->

    <adr id="N"> <!-- начало информации для табло с адресом N -->
	<!--... -->
	</adr> <!-- конец информации для табло с адресом N  -->

<image_data count="2">       <!-- число уникальных (!) картинок, распространяется на все табло на всех адресах. От 0 до 8. Также включает в себя все кадры анимаций по отдельности.-->
    <image id="1">
        <name>st_64x64_8bit.bmp</name>
        <bits>8</bits>  <!-- цветность картинки, бит на канал -->
        <size> <!--размер картинки по Х, У -->
            <X>64</X>
            <Y>64</Y>
        </size>        
        <row>FFAABB</row> <!-- здесь 1 pix (RGB 255 170 187): 3 цвета, макс размер изображения 64х64 -->
        <row>FFAABBFFAABB</row> <!-- здесь 2 pix (RGBRGB): 3 цвета, макс размер изображения 64х64 -->
        <row>FFAABB</row>  
    </image>

    <image id="2">
        <name>st_64x64_4bit.bmp</name>    
        <bits>4</bits>  <!-- цветность картинки, бит на канал -->
        <size> <!--размер картинки по Х, У -->
            <X>64</X>
            <Y>64</Y>
        </size>  
        <row>FAB</row> <!-- здесь 1 pix (RGB 255 170 187): 3 цвета, макс размер изображения 64х64 -->
        <row>FABFAB</row> <!-- здесь 2 pix (RGBRGB): 3 цвета, макс размер изображения 64х64 -->
        <row>FAB</row>    
    </image>  
</image_data>


<extboard_crc>ABCD</extboard_crc>  <!-- CRC16 modbus, для всего между <extboard_data> и <extboard_crc> -->
</extboard_data>  <!--конец передачи -->

<!-- список символов, недопустимых в протоколе XML (они подлежат обязательной замене на соответствующие &xxx; значения) -->
<!-- меньше "<" ==> &lt; -->
<!-- больше ">" ==> &gt; -->
<!-- амперсанд "&" ==> &amp; -->
<!-- апостроф "'" ==> &apos; -->
<!-- кавычки """ ==> &quot; -->

<!--переменные для использования в тексте:              -->
<!--$time - вида чч:мм "22:55"   -->
<!--$date - dd.mm.yy (ru)       -->
<!--$date1 - dd/mm/yy (uk)      -->
<!--$date2 - dd-mm-yy (gen eng)  -->
<!--$date3 - mm/dd/yy (usa)      -->
<!--$date4 - yy-mm-dd (some eu)  -->
<!--$day1 - "Понедельник / Вторник / Среда / Четверг / Пятница / Суббота / Воскресенье"  -->
<!--$day2 - "Пн, Вт, Ср, Чт, Пт, Сб, Вс"   -->
<!--$day3 - "Monday / Tuesday / Wednesday / Thursday / Friday / Saturday / Sunday"   -->
<!--$day4 - "Mon, Tue, Wed, Thu, Fri, Sat, Sun"     -->
<!--$temp1 - "+25", "-5", "0", для датчика 1    -->
<!--$temp2 - то же самое для датчика 2  -->
<!--$temp3 - то же самое для датчика 3   -->
<!--$dd - dd день, например 01/02/03/04/21/31 -->
<!--$mm - mm месяц, например 01/02/03/04/12  -->
<!--$mm1 - рус. 3 буквы  Янв/Фев/Мар/Апр/Мая/Июн/Июл/Авг/Сен/Окт/Ноя/Дек  -->
<!--$mm2 - рус. полные месяцы Января/Февраля/Марта/Апреля/Мая/Июня/Июля/Августа/Сентября/Октября/Ноября/Декабря   -->
<!--$mm3 - англ. 3 буквы Jan/Feb/Mar/Apr/May/Jun/Jul/Aug/Sep/Oct/Nov/Dec  -->
<!--$mm4 - англ. полные месяцы January/February/March/April/May/June/July/August/September/Oct/November/December  -->
<!--$speed - скорость в км/ч. Само "км/ч" не входит, только значение скорости, округленное до целого. -->

<!-- $textbs - текст, предназначенный для вывода на внутрисалонную бегущую строку -->
<!-- $route - текст c именем маршрута, берется из посылки на БС -->

<!--$yy - год из 2-х последних цифр -->
<!--$yyyy - год из 4-х цифр -->

<!-- изменения версии 1.8:  касаются тегов adr, zone, text - добавлены аттрибуты -->
<!-- изменения версии 1.9:  касаются тегов text, str - добавлен атрибут replace для индикации наличия переменных для подмены (сразу указывается их число)-->
<!-- версия 2.0: тег "font" перенесён в конец описания zone (перед </zone>) по запросу Вани -->
<!-- версия 2.1: добавлены картинки (mode 5) -->
<!-- версия 2.2: добавлена переменная $textbs -->
<!-- версия 2.3: добавлен тег <bits> в картинки -->
<!-- версия 2.4: добавлена переменная $route -->
<!-- версия 2.5:  убран атрибут replace за ненадобностью отовсюду (Ваня сказал) , <direction> вынесен за Mode=1 (надо для режима БС)-->
<!-- версия 2.6: добавлен тег в mode=2: <speed>35</speed> <!-- если текст кусков не помещается в зону, он будет бежать. скорость бега текста, от 1 до 999 см/сек  --> -->
<!-- версия 2.7: тег <fade_speed> изменён на </fade_time>, а значения изменены с плавающей точки на целые миллисекунды (10...1000)-->
<!-- версия 2.8: добавлена переменная скорости $speed -->
<!-- версия 2.9: добавлен тег <image_data> вне адресов, данные пикселей из картинок перенесены туда. -->
<!-- версия 3.0: Добавлен тег <images> для одного адреса, стоит перед общим числом зон с кол-вом уник картинок (Ване для выделения памяти).  
                Добавлен mode 6 с анимацией из нескольких картинок. В нём добавлены теги <frames>, <frame>, <time_on> -->
<!-- версия 3.1: изменён тег <images> так, чтобы от отображал число уник картинок только для одного адреса, а не всех -->    
<!-- версия 3.2: Добавлены новые теги в начало касаемо "динамического режима" табло  -->             
<!-- версия 3.3: Изменены значения режимов mode для картинок и анимаций (с 5 и 6 на  4 и 5)  -->     
<!-- версия 3.4: В комментарии добавлен список символов-исключений языка XML (5шт) -->  
<!-- версия 3.5: Добавлен новый тип зоны mode 6, для вывода списка оставшихся остановок, и соответствующие вложенные теги -->      
<!-- версия 3.6: Убран новый тип зоны mode 6. Вместо него добавлен тег <nextstops> в mode 1/2 -->      
